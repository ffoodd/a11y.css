@charset "UTF-8";


/*doc
---
title: "Retrieve message from translation map"
name: message
category: Docs
subcategory: Functions
---

``` scss
@function message($theme, $key) {
  $message-key: $theme + ':' + $key;

  @if not map-has-key($messages, $message-key) {
    @error 'No key `#{$message-key}` found.';
  }

  @return map-get($messages, $message-key);
}
```

### Description

Retrieve message from translation map.

### Parameters

| Name     | Description                                       | Type     | Default value |
| -------- | ------------------------------------------------- | -------- | ------------- |
| `$theme` | Either `advice`, `error`, `warning` or `obsolete` | `String` | —             |
| `$key`   | Key to find message for                           | `String` | —             |

### Returns

`String`

#### Used by

- [`base-content()` mixin](#messages-mixin-base-content)
- [`message()` mixin](#messages-mixin-message)
*/
@function message($theme, $key) {
  $message-key: $theme + ':' + $key;

  @if not map-has-key($messages, $message-key) {
    @error 'No key `#{$message-key}` found.';
  }

  @return map-get($messages, $message-key);
}


/*doc
---
title: "Get theme configuration"
name: theme-conf
category: Docs
subcategory: Functions
---

``` scss
@function theme-conf($theme, $key) {
  @return map-get(map-get($themes, $theme), $key);
}
```

### Description

Helper function to easily access a theme configuration.

### Parameters

| Name     | Description                                          | Type     | Default value |
| -------- | ---------------------------------------------------- | -------- | ------------- |
| `$theme` | Either `advice`, `error`, `warning` or `obsolete`    | `String` | —             |
| `$key`   | Data to get: `color`, `index` or `background-offset` | `String` | —             |

### Returns

`*`

### Example

Get color from error theme.

``` scss
.selector {
  color: theme-conf('error', 'color');
}
```

``` css
.selector {
  color: #911;
}
```

#### Used by

- [`base-content()` mixin](#messages-mixin-base-content)
- [`a11y()` mixin](#messages-mixin-a11y)
- [`%a11y-#{$theme}` placeholder](#messages-placeholder-level-styles)
*/
@function theme-conf($theme, $key) {
  @return map-get(map-get($themes, $theme), $key);
}


/*doc
---
title: "Test whether `$level` is high enough to be displayed"
name: is-level-enough
category: Docs
subcategory: Functions
---

``` scss
@function is-level-enough($level) {
  $levels: map-keys($themes);
  @return index($levels, $level) <= index($levels, $minimum-level);
}
```

### Description

Test whether `$level` is high enough to be displayed by comparing its index to `$minimum-level`'s.

### Parameters

| Name     | Description                                       | Type     | Default value |
| -------- | ------------------------------------------------- | -------- | ------------- |
| `$level` | Either `advice`, `error`, `warning` or `obsolete` | `String` | —             |

### Returns

`Boolean`

#### Used by

- [`base-content()` mixin](#messages-mixin-base-content)
- [`item()` mixin](#messages-mixin-item)
*/
@function is-level-enough($level) {
  $levels: map-keys($themes);
  @return index($levels, $level) <= index($levels, $minimum-level);
}


/*doc
---
title: "Escaping CSS attr() function"
name: replace-attr
category: Docs
subcategory: Functions
---

``` scss
@function replace-attr($message) {
  $has-attr: str-index($message, 'attr(');
  $first-paren: str-index($message, ')');

  @if not $has-attr {
    @return $message;
  }

  $first-chunk: str-slice($message, 1, $has-attr - 1);
  $last-chunk: str-slice($message, $first-paren + 1);

  $result: ();

  @if str-length($first-chunk) > 0 {
    $result: append($result, $first-chunk);
  }

  $result: append($result, unquote(str-slice($message, $has-attr, $first-paren)));

  @if str-length($last-chunk) > 0 {
    $result: append($result, replace-attr($last-chunk));
  }

  @return $result;
}
```

### Description

Ensures CSS `attr()` function will render the expected value, instead of being output as a string.

### Parameters

| Name       | Description       | Type     | Default value |
| ---------- | ----------------- | -------- | ------------- |
| `$message` | Message to escape | `String` | —             |

### Returns

`String`

### Example

``` scss
.selector {
  content: replace-attr("ARIA role attr(role) should be unique, but this one is the second!");
}
```

``` css
.selector {
  content: "ARIA role " attr(role) "should be unique, but this one is the second!";
}
```

#### Used by

- [`message()` mixin](#messages-mixin-message)
*/
@function replace-attr($message) {
  $has-attr: str-index($message, 'attr(');
  $first-paren: str-index($message, ')');

  @if not $has-attr {
    @return $message;
  }

  $first-chunk: str-slice($message, 1, $has-attr - 1);
  $last-chunk: str-slice($message, $first-paren + 1);

  $result: ();

  @if str-length($first-chunk) > 0 {
    $result: append($result, $first-chunk);
  }

  $result: append($result, unquote(str-slice($message, $has-attr, $first-paren)));

  @if str-length($last-chunk) > 0 {
    $result: append($result, replace-attr($last-chunk));
  }

  @return $result;
}
