@charset 'UTF-8';

%a11y-before {
  border-style: solid                                                   !important;
  border-width: 0 0 1px                                                 !important;
  border-radius: 0                                                      !important;
  display: block                                                        !important;
  height: auto                                                          !important;
  width: 100%                                                           !important;
  padding: 1em 0;

  position: fixed                                                       !important;
  bottom: auto                                                          !important;
  left: 0                                                               !important;
  right: 0                                                              !important;
  top: 0                                                                !important;

  pointer-events: none                                                  !important;
  opacity: 0;

  font: 400
        normal
        1rem/1.5
        "Source Code Pro",
        "SourceCodePro-Medium",
        "Fira Mono",
        "Droid Sans Mono",
        "Ubuntu Mono",
        "Consolas",
        "Monaco",
        "Andale Mono",
        monospace                                                       !important;
  text-align: center                                                    !important;
  text-decoration: none                                                 !important;
  text-shadow: 0 1px 0 rgba( 255, 255, 255, .2 )                        !important;
  text-transform: none                                                  !important;
  transform:          translateY( -100% ) translateZ( 0 )               !important;
  transition:         transform .3s ease-in                             !important;
  white-space: pre;
}

%a11y-hover {
  opacity: 1;
  transform:          translateY( 0 ) translateZ( 0 )                   !important;
  transition:         transform .3s ease-in                             !important;
}

// Dynamically generating a placeholder for each theme
@each $theme in map-keys($themes) {
  %a11y-#{$theme} {
    counter-increment: unquote($theme);
    outline: 4px solid theme-conf($theme, 'color') !important;
    outline-offset: -4px;

    &::before {
      @extend %a11y-before;

      background:   change-color(theme-conf($theme, 'color'), $saturation: 75%, $lightness: 95%) !important;
      border-color: change-color(theme-conf($theme, 'color'), $saturation: 50%, $lightness: 50%) !important;
      color:        change-color(theme-conf($theme, 'color'), $saturation: 50%, $lightness: 25%) !important;

      z-index: theme-conf($theme, 'index') !important;
    }

    &:hover::before,
    &:focus::before {
      @extend %a11y-hover;
    }
  }

  %a11y-#{$theme}-self-closing {
    background-color: transparentize(theme-conf($theme, 'color'), .75) !important;
    counter-increment: unquote($theme);
    outline: 4px solid theme-conf($theme, 'color') !important;
    outline-offset: -4px;

    ~ ::after {
      @extend %a11y-before;

      background:   change-color(theme-conf($theme, 'color'), $saturation: 75%, $lightness: 95%) !important;
      border-color: change-color(theme-conf($theme, 'color'), $saturation: 50%, $lightness: 50%) !important;
      color:        change-color(theme-conf($theme, 'color'), $saturation: 50%, $lightness: 25%) !important;

      z-index: theme-conf($theme, 'index') !important;
    }

    &:hover ~ ::after,
    &:focus ~ ::after {
      @extend %a11y-hover;
    }
  }
}

// Provides a way to cancel a message
%a11y-reset {
  &,
  &:hover,
  &:focus {
    counter-increment: none !important;
    outline: none           !important;
    outline-offset: 0       !important;

    &::before,
    & ~ ::after {
      content: ""           !important;
    }
  }
}
